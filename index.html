<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sistem Pencernaan Manusia ‚Äì Kelas 5 SD</title>
  <style>
    :root{
      --bg:#f9fbfd; --ink:#102a43; --muted:#486581; --brand:#1f7a8c; --brand2:#2ec4b6; --accent:#ff9f1c; --card:#ffffff; --ok:#2a9d8f; --warn:#e76f51;
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;line-height:1.55}
    .wrapper{max-width:1100px;margin:auto;padding:24px}
    header{display:grid;gap:8px;margin-bottom:20px}
    h1{margin:0;font-size:clamp(28px,4vw,40px)}
    p.lead{margin:0;color:var(--muted)}
    .grid{display:grid;gap:16px}
    @media(min-width:880px){.grid-2{grid-template-columns:1.3fr 1fr}}
    .card{background:var(--card);border-radius:16px;box-shadow:0 10px 30px rgba(16,42,67,.07);padding:20px}
    .badge{display:inline-block;padding:.25rem .6rem;border-radius:999px;background:rgba(31,122,140,.1);color:var(--brand);font-weight:600;font-size:12px;margin-bottom:8px}
    h2{margin:.2rem 0 .8rem}
    .pill{display:inline-block;padding:.25rem .6rem;border-radius:999px;background:rgba(255,159,28,.12);color:var(--accent);font-weight:600;font-size:12px;margin:.2rem .2rem .6rem 0}
    .diagram-wrap{display:grid;gap:12px}
    .legend{display:flex;flex-wrap:wrap;gap:8px}
    .hint{font-size:13px;color:var(--muted)}
    .details{background:#f3f9fb;border-left:4px solid var(--brand2);padding:12px;border-radius:10px}
    /* SVG interaktif */
    svg{width:100%;height:auto;background:#fff;border-radius:12px}
    .organ{cursor:pointer;transition:all .2s ease}
    .organ:hover{filter:brightness(1.05)}
    .label{font-size:12px;fill:#0b132b}
    /* Kuis */
    form .q{padding:14px 12px;border:1px solid #e6eef4;border-radius:12px;margin:12px 0;background:#fff}
    .q h4{margin:.2rem 0 .4rem}
    .req{color:var(--warn);font-size:12px;display:none}
    .btn{appearance:none;border:0;background:var(--brand);color:#fff;font-weight:700;padding:12px 16px;border-radius:12px;cursor:pointer}
    .btn.secondary{background:#ddeef2;color:#134e6f}
    .btn.ghost{background:transparent;border:2px solid var(--brand);color:var(--brand)}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .score{display:none;margin-top:12px;padding:16px;border-radius:12px;background:#ecfdf5;border:1px solid #bbf7d0}
    .score h3{margin:.2rem 0}
    .video{aspect-ratio:16/9;width:100%;border:0;border-radius:12px}
    .toolbar{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .small{font-size:12px;color:var(--muted)}
    .table-like{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .chip{display:inline-flex;gap:6px;align-items:center;padding:.25rem .6rem;border-radius:999px;background:#eef7ff;color:#144f7a;font-size:12px}
    footer{margin:28px 0 12px;color:var(--muted);font-size:13px;text-align:center}
    .note{background:#fff6e6;border:1px dashed #ffd08a;padding:10px;border-radius:10px;margin-top:8px}
    .visit{color:var(--brand);font-weight:700;text-decoration:none}
  </style>
</head>
<body>
  <div class="wrapper">
    <header>
      <span class="badge">Website Interaktif ‚Ä¢ Kelas 5 SD</span>
      <h1>Sistem Pencernaan Manusia</h1>
      <p class="lead">Pelajari urutan organ, proses mekanik & kimia, penyerapan nutrisi, dan cek pemahaman lewat kuis. Klik bagian organ di diagram untuk melihat penjelasan ringkas.</p>
      <div class="legend">
        <span class="chip">üîé Klik organ ‚Üí detail</span>
        <span class="chip">‚ñ∂Ô∏è Tonton video</span>
        <span class="chip">üìù Kerjakan kuis</span>
      </div>
    </header>

    <!-- MATERI + DIAGRAM -->
    <section class="grid grid-2">
      <div class="card diagram-wrap">
        <span class="badge">Materi Inti</span>
        <h2>Alur Perjalanan Makanan</h2>
        <div class="hint">Mulut ‚Üí Kerongkongan ‚Üí Lambung ‚Üí Usus Halus ‚Üí Usus Besar ‚Üí Rektum/Anus ‚Ä¢ Organ aksesori: Hati, Pankreas, Kantong Empedu</div>

        <!-- SVG DIAGRAM SEDERHANA & INTERAKTIF -->
        <svg viewBox="0 0 680 820" aria-labelledby="title desc" role="img">
          <title id="title">Diagram Sistem Pencernaan</title>
          <desc id="desc">Klik bagian organ untuk melihat penjelasan</desc>

          <!-- Siluet tubuh -->
          <rect x="0" y="0" width="680" height="820" fill="#f7fafc" rx="14"/>
          <!-- Mulut -->
          <g class="organ" data-id="mulut" onclick="showDetail('mulut')" >
            <rect x="290" y="40" width="100" height="30" fill="#ffadad" rx="6"/>
            <text x="340" y="35" text-anchor="middle" class="label">Mulut</text>
          </g>

          <!-- Kerongkongan -->
          <g class="organ" data-id="kerongkongan" onclick="showDetail('kerongkongan')">
            <rect x="335" y="70" width="12" height="120" fill="#ffd6a5" rx="6"/>
            <text x="390" y="135" class="label">Kerongkongan</text>
          </g>

          <!-- Lambung -->
          <g class="organ" data-id="lambung" onclick="showDetail('lambung')">
            <ellipse cx="325" cy="230" rx="110" ry="70" fill="#fdffb6"/>
            <text x="325" y="220" text-anchor="middle" class="label">Lambung</text>
          </g>

          <!-- Usus Halus -->
          <g class="organ" data-id="usus_halus" onclick="showDetail('usus_halus')">
            <rect x="200" y="300" width="290" height="170" fill="#caffbf" rx="16"/>
            <text x="345" y="320" text-anchor="middle" class="label">Usus Halus (vili)</text>
          </g>

          <!-- Usus Besar -->
          <g class="organ" data-id="usus_besar" onclick="showDetail('usus_besar')">
            <rect x="180" y="290" width="330" height="260" fill="none" stroke="#a0c4ff" stroke-width="14" rx="28"/>
            <text x="345" y="560" text-anchor="middle" class="label">Usus Besar</text>
          </g>

          <!-- Rektum/Anus -->
          <g class="organ" data-id="rektum" onclick="showDetail('rektum')">
            <rect x="330" y="550" width="28" height="120" fill="#bdb2ff" rx="10"/>
            <text x="420" y="620" class="label">Rektum/Anus</text>
          </g>

          <!-- Hati -->
          <g class="organ" data-id="hati" onclick="showDetail('hati')">
            <ellipse cx="470" cy="240" rx="80" ry="45" fill="#ffc6ff"/>
            <text x="470" y="235" text-anchor="middle" class="label">Hati</text>
          </g>

          <!-- Kantong Empedu -->
          <g class="organ" data-id="empedu" onclick="showDetail('empedu')">
            <ellipse cx="515" cy="275" rx="20" ry="14" fill="#ffbe0b"/>
            <text x="555" y="280" class="label">Kantong Empedu</text>
          </g>

          <!-- Pankreas -->
          <g class="organ" data-id="pankreas" onclick="showDetail('pankreas')">
            <rect x="430" y="300" width="90" height="20" fill="#ffd166" rx="8"/>
            <text x="520" y="315" class="label">Pankreas</text>
          </g>
        </svg>

        <div id="detail" class="details">
          <strong>Tip:</strong> klik organ pada diagram untuk melihat ringkasan fungsi.
        </div>

        <div class="note small">
          <strong>Mekanik vs Kimia:</strong> Mengunyah & peristaltik = mekanik; enzim (amilase, pepsin, lipase, dll.) & asam lambung = kimia.
        </div>
      </div>

      <!-- VIDEO -->
      <div class="card">
        <span class="badge">Video Pembelajaran</span>
        <h2>Tonton: Sistem Pencernaan Manusia</h2>
        <!-- Gunakan iframe yang diminta (VIDEO_ID sudah diisi) -->
        <iframe
          class="video"
          src="https://www.youtube.com/embed/g9LvjUavRMg"
          title="Sistem Pencernaan Manusia"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        ></iframe>
        <div class="toolbar">
          <span class="small">Saran: catat 3 hal baru yang kamu pelajari, ya!</span>
        </div>

        <div class="note small" style="margin-top:10px">
          <strong>Catatan untuk Canva Website:</strong> jika kamu membuat situs di Canva, cukup tempelkan link YouTube-nya
          atau gunakan <em>Apps ‚Üí YouTube</em>. Atau sisipkan kode <code>&lt;iframe&gt;</code> seperti di atas jika platform
          mendukung HTML embed.
        </div>
      </div>
    </section>

    <!-- KUIS -->
    <section class="card" id="quiz">
      <span class="badge">Kuis Interaktif (5 Soal)</span>
      <h2>Cek Pemahaman Kamu</h2>

      <div class="table-like">
        <div>
          <label>Nama Siswa</label><br/>
          <input id="nama" type="text" placeholder="Isikan namamu" style="width:100%;padding:10px;border-radius:10px;border:1px solid #dbe7ef"/>
        </div>
        <div>
          <label>Kelas</label><br/>
          <input id="kelas" type="text" placeholder="Misal: 5A" style="width:100%;padding:10px;border-radius:10px;border:1px solid #dbe7ef"/>
        </div>
      </div>

      <form id="form-quiz" novalidate>
        <div class="q" data-key="q1">
          <h4>1) Organ pertama tempat makanan masuk adalah...</h4>
          <label><input type="radio" name="q1" value="A"> Mulut</label><br/>
          <label><input type="radio" name="q1" value="B"> Lambung</label><br/>
          <label><input type="radio" name="q1" value="C"> Usus Halus</label>
          <div class="req">Wajib pilih salah satu.</div>
        </div>

        <div class="q" data-key="q2">
          <h4>2) Enzim yang ada di air liur untuk memecah karbohidrat adalah...</h4>
          <label><input type="radio" name="q2" value="A"> Lipase</label><br/>
          <label><input type="radio" name="q2" value="B"> Amilase</label><br/>
          <label><input type="radio" name="q2" value="C"> Pepsin</label>
          <div class="req">Wajib pilih salah satu.</div>
        </div>

        <div class="q" data-key="q3">
          <h4>3) Peristaltik (gerakan mendorong makanan) terjadi di...</h4>
          <label><input type="radio" name="q3" value="A"> Kerongkongan</label><br/>
          <label><input type="radio" name="q3" value="B"> Hati</label><br/>
          <label><input type="radio" name="q3" value="C"> Kantong Empedu</label>
          <div class="req">Wajib pilih salah satu.</div>
        </div>

        <div class="q" data-key="q4">
          <h4>4) Penyerapan nutrisi utama terjadi di...</h4>
          <label><input type="radio" name="q4" value="A"> Lambung</label><br/>
          <label><input type="radio" name="q4" value="B"> Usus Halus</label><br/>
          <label><input type="radio" name="q4" value="C"> Usus Besar</label>
          <div class="req">Wajib pilih salah satu.</div>
        </div>

        <div class="q" data-key="q5">
          <h4>5) Empedu membantu mencerna (mengemulsi) ...</h4>
          <label><input type="radio" name="q5" value="A"> Protein</label><br/>
          <label><input type="radio" name="q5" value="B"> Lemak</label><br/>
          <label><input type="radio" name="q5" value="C"> Karbohidrat</label>
          <div class="req">Wajib pilih salah satu.</div>
        </div>

        <div class="toolbar">
          <button type="submit" class="btn">Kirim Jawaban</button>
          <button type="button" class="btn secondary" onclick="resetQuiz()">Ulangi</button>
          <button type="button" class="btn ghost" onclick="exportCSV()">Export CSV</button>
        </div>

        <div id="scorebox" class="score">
          <h3>Skor Kamu: <span id="skor">0</span> / 100</h3>
          <div id="feedback"></div>
          <div class="small" id="summary"></div>
        </div>

        <div class="note small">
          <strong>Koneksi ke Canva Sheets:</strong> tombol <em>Export CSV</em> akan mengunduh data (Nama, Kelas, Skor, Jawaban).
          Kamu bisa upload CSV ini ke Canva Sheets. Jika punya webhook/endpoint (misal Make/Zapier) yang mengisi Canva Sheets,
          set variabel <code>WEBHOOK_URL</code> di skrip agar hasil terkirim otomatis.
        </div>
      </form>
    </section>

    <footer>¬© 2025 ‚Ä¢ Materi dan kuis untuk pembelajaran. Dibuat ramah anak, validasi wajib isi, dan tampilan skor otomatis.</footer>
  </div>

  <script>
    // ====== MATERIAL DETAIL ======
    const materi = {
      mulut: {
        title: "Mulut",
        text: "Di mulut, gigi mengunyah (mekanik) dan air liur dengan enzim amilase mulai memecah karbohidrat (kimia). Lidah membentuk bolus sebelum ditelan."
      },
      kerongkongan: {
        title: "Kerongkongan",
        text: "Kerongkongan mendorong bolus ke lambung dengan gerakan otot bergelombang yang disebut peristaltik. Epiglotis menutup jalan napas saat menelan."
      },
      lambung: {
        title: "Lambung",
        text: "Lambung mengaduk makanan dengan asam (HCl) dan enzim pepsin untuk mencerna protein. Campuran setengah cair disebut kimus (chyme)."
      },
      usus_halus: {
        title: "Usus Halus (Duodenum‚ÄìJejunum‚ÄìIleum)",
        text: "Tempat penyerapan utama. Vili (jonjot usus) memperluas permukaan serapan. Enzim pankreas dan empedu membantu mencerna lemak, protein, dan karbohidrat."
      },
      usus_besar: {
        title: "Usus Besar",
        text: "Di sini air diserap sehingga terbentuk feses. Bakteri baik menghasilkan vitamin tertentu, dan sisa makanan dipersiapkan untuk dikeluarkan."
      },
      rektum: {
        title: "Rektum/Anus",
        text: "Feses disimpan di rektum dan dikeluarkan melalui anus saat buang air besar."
      },
      hati: {
        title: "Hati",
        text: "Menghasilkan empedu yang membantu mengemulsi lemak sehingga enzim lebih mudah bekerja."
      },
      empedu: {
        title: "Kantong Empedu",
        text: "Menyimpan dan menyalurkan empedu dari hati ke duodenum ketika diperlukan untuk mencerna lemak."
      },
      pankreas: {
        title: "Pankreas",
        text: "Menghasilkan enzim (amilase, lipase, protease) dan bikarbonat untuk menetralkan asam dari lambung."
      }
    };

    function showDetail(key){
      const d = materi[key];
      const el = document.getElementById('detail');
      el.innerHTML = `<strong>${d.title}:</strong> ${d.text}`;
      el.animate([{opacity:.3},{opacity:1}],{duration:220});
    }

    // ====== QUIZ LOGIC ======
    const ANSWER_KEY = { q1:'A', q2:'B', q3:'A', q4:'B', q5:'B' };
    const WEBHOOK_URL = ""; // <- isi jika kamu punya endpoint untuk push ke Canva Sheets via integrator

    const form = document.getElementById('form-quiz');
    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      // Validasi identitas
      const nama = (document.getElementById('nama').value||"").trim();
      const kelas = (document.getElementById('kelas').value||"").trim();
      if(!nama || !kelas){
        alert("Nama dan Kelas wajib diisi ya!");
        return;
      }

      // Validasi jawaban
      let ok = true;
      const answers = {};
      document.querySelectorAll('.q').forEach(q=>{
        const key = q.getAttribute('data-key');
        const val = (form.querySelector(`input[name="${key}"]:checked`)||{}).value;
        if(!val){
          ok = false;
          q.querySelector('.req').style.display = 'block';
        } else {
          q.querySelector('.req').style.display = 'none';
          answers[key] = val;
        }
      });
      if(!ok){ window.scrollTo({top: form.offsetTop-40, behavior:'smooth'}); return; }

      // Hitung skor
      let score = 0, correctCount = 0;
      Object.keys(ANSWER_KEY).forEach(k=>{
        if(answers[k] === ANSWER_KEY[k]) {score += 20; correctCount += 1;}
      });

      // Tampilkan hasil
      const box = document.getElementById('scorebox');
      const fb = document.getElementById('feedback');
      const sum = document.getElementById('summary');
      document.getElementById('skor').textContent = score.toString();

      let msg = "";
      if(score >= 80) msg = "Hebat! Pemahaman kamu sangat baik üéâ";
      else if(score >= 60) msg = "Bagus! Tinggal sedikit lagi, semangat! üí™";
      else msg = "Ayo ulangi materi dan coba lagi. Kamu pasti bisa! üåü";
      fb.textContent = msg;

      const chosen = Object.entries(answers).map(([k,v])=>`${k.toUpperCase()}:${v}`).join(" ‚Ä¢ ");
      sum.textContent = `Benar: ${correctCount}/5 ‚Ä¢ Jawaban: ${chosen}`;
      box.style.display = 'block';
      box.scrollIntoView({behavior:'smooth',block:'center'});

      // Kirim ke webhook (opsional)
      if(WEBHOOK_URL){
        const payload = {
          nama, kelas, score, correctCount,
          answers, timestamp: new Date().toISOString()
        };
        fetch(WEBHOOK_URL, {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify(payload)
        }).catch(()=>{/* silent */});
      }
    });

    function resetQuiz(){
      form.reset();
      document.querySelectorAll('.req').forEach(el=>el.style.display='none');
      document.getElementById('scorebox').style.display = 'none';
    }

    function exportCSV(){
      const nama = (document.getElementById('nama').value||"").trim();
      const kelas = (document.getElementById('kelas').value||"").trim();
      // Kumpulkan jawaban (boleh kosong jika belum diisi)
      const ans = {};
      ['q1','q2','q3','q4','q5'].forEach(k=>{
        ans[k] = (form.querySelector(`input[name="${k}"]:checked`)||{}).value || "";
      });

      // Re-hitung skor agar konsisten saat export
      let score = 0;
      Object.keys(ANSWER_KEY).forEach(k=>{
        if(ans[k] && ans[k] === ANSWER_KEY[k]) score += 20;
      });

      const ts = new Date().toISOString();
      const headers = ["timestamp","nama","kelas","q1","q2","q3","q4","q5","score"];
      const row = [ts, nama, kelas, ans.q1, ans.q2, ans.q3, ans.q4, ans.q5, score];
      const csv = [headers.join(","), row.map(v => `"${(v??"").toString().replace(/"/g,'""')}"`).join(",")].join("\n");

      const blob = new Blob([csv], {type:"text/csv;charset=utf-8;"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = `kuis-pencernaan_${ts.replace(/[:.]/g,'-')}.csv`;
      document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>
